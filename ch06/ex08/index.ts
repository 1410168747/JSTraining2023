/*
## å•é¡Œ 6.8 ğŸ’» ğŸ“„

p.157 ä¸‹éƒ¨ã§è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å­˜åœ¨ã—ãªã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å‰Šé™¤ã™ã‚‹ `restrict()` ã€ã‚ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’åˆ¥ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å‰Šé™¤ã™ã‚‹ `substract()` é–¢æ•°ã‚’ä»¥ä¸‹ã®é€šã‚Šå®Ÿè£…ã—ãªã•ã„ã€‚
ä¸ãˆã‚‰ã‚ŒãŸãƒ†ã‚¹ãƒˆã‚’å…¨ã¦ãƒ‘ã‚¹ã™ã‚‹ã“ã¨ã€‚

Symbol ã¨ç¶™æ‰¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯è€ƒæ…®ã—ãªãã¦ã‚ˆã„ã€‚

```js
function restrict(target, template);
```

**å¼•æ•°**

`target` å‰Šé™¤å…ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ â€” å‰Šé™¤å¯¾è±¡ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é©ç”¨ã™ã‚‹ã‚‚ã®ã§ã€ã‚ªãƒªã‚¸ãƒŠãƒ«å¤‰æ›´å¾Œã«è¿”ã•ã‚Œã¾ã™ã€‚Symbol ã¨ç¶™æ‰¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯å‰Šé™¤å¯¾è±¡å¤–ã§ã™ã€‚

`template` ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ â€” ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å­˜åœ¨ã—ãªã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯å‰Šé™¤å…ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å‰Šé™¤ã•ã‚Œã¾ã™ã€‚ç¶™æ‰¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å­˜åœ¨ã—ã¦ã„ã¦ã‚‚å‰Šé™¤å…ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç¶™æ‰¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ä»¥å¤–ã§åŒåã‚’ã‚‚ã¤å ´åˆå‰Šé™¤å¯¾è±¡ã«ãªã‚Šã¾ã™ã€‚

**è¿”å€¤**

å‰Šé™¤å…ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚

```js
function substract(target, ...sources);
```

**å¼•æ•°**

`target` å‰Šé™¤å…ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ â€” å‰Šé™¤å¯¾è±¡ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é©ç”¨ã™ã‚‹ã‚‚ã®ã§ã€ã‚ªãƒªã‚¸ãƒŠãƒ«å¤‰æ›´å¾Œã«è¿”ã•ã‚Œã¾ã™ã€‚Symbol ã¨ç¶™æ‰¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯å‰Šé™¤å¯¾è±¡å¤–ã§ã™ã€‚

`sources` å‰Šé™¤å¯¾è±¡æŒ‡å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (å˜æ•°ã¾ãŸã¯è¤‡æ•°) â€” å‰Šé™¤ã—ãŸã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å«ã‚€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚Symbol ã¨ç¶™æ‰¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯å‰Šé™¤å¯¾è±¡ã«ãªã‚Šã¾ã›ã‚“ã€‚

**è¿”å€¤**

å‰Šé™¤å…ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚

**å‡ºé¡Œç¯„å›²**: 6.7*/

/**
 *
 * @param target å‰Šé™¤å¯¾è±¡ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é©ç”¨ã™ã‚‹ã‚‚ã®ã§ã€ã‚ªãƒªã‚¸ãƒŠãƒ«å¤‰æ›´å¾Œã«è¿”ã•ã‚Œã¾ã™ã€‚Symbol ã¨ç¶™æ‰¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯å‰Šé™¤å¯¾è±¡å¤–ã§ã™
 * @param template ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å­˜åœ¨ã—ãªã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯å‰Šé™¤å…ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å‰Šé™¤ã•ã‚Œã¾ã™ã€‚
 * ç¶™æ‰¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å­˜åœ¨ã—ã¦ã„ã¦ã‚‚å‰Šé™¤å…ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç¶™æ‰¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ä»¥å¤–ã§åŒåã‚’ã‚‚ã¤å ´åˆå‰Šé™¤å¯¾è±¡ã«ãªã‚Šã¾ã™ã€‚
 * @returns å‰Šé™¤å…ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚
 */
export const restrict = (target: any, template: any): object =>
  Object.getOwnPropertyNames(target)
    .filter((e) => !template.hasOwnProperty(e))
    .reduce((acc, e) => (delete acc[e], acc), target);

/**
 *
 * @param target å‰Šé™¤å…ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ â€” å‰Šé™¤å¯¾è±¡ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é©ç”¨ã™ã‚‹ã‚‚ã®ã§ã€ã‚ªãƒªã‚¸ãƒŠãƒ«å¤‰æ›´å¾Œã«è¿”ã•ã‚Œã¾ã™ã€‚Symbol ã¨ç¶™æ‰¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯å‰Šé™¤å¯¾è±¡å¤–ã§ã™ã€‚
 * @param sources å‰Šé™¤å¯¾è±¡æŒ‡å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (å˜æ•°ã¾ãŸã¯è¤‡æ•°) â€” å‰Šé™¤ã—ãŸã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å«ã‚€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚Symbol ã¨ç¶™æ‰¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯å‰Šé™¤å¯¾è±¡ã«ãªã‚Šã¾ã›ã‚“ã€‚
 * @returns å‰Šé™¤å…ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚
 */
export function substract(target: object, ...sources: object[]): object {
  // for (const propName of Object.getOwnPropertyNames(target)) {
  //   for (const source of sources) {
  //     if (source.hasOwnProperty(propName)) {
  //       delete (target as any)[propName];
  //       break;
  //     }
  //   }
  // }
  // return target;

  return Object.getOwnPropertyNames(target)
    .filter((propName) => sources.some((e) => e.hasOwnProperty(propName)))
    .reduce((acc, e) => (delete acc[e], acc), target as any); // as anyãŒãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ãŒè§£æ¶ˆæ–¹æ³•ãŒä¸æ˜
}
